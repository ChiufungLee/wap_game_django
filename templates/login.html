{% extends 'base.html' %}

{% block title %}登录{% endblock %}

{% block css %}
<script type="text/javascript">
	function login() {
		var errmsg = document.getElementById("errmsg");
		var form = document.loginform;
		var username = form.username.value.trim();
		var password = form.password.value.trim();
		var remember_me = form.remember_me.checked;
		if(0 == username.length) {
			errmsg.innerHTML="请输入账号";
			form.username.select();
			return false;
		}
		if(0 == password.length) {
			errmsg.innerHTML="请输入密码";
			form.password.select();
			return false;
		}
		setCookie("username", username, remember_me ? 30 : 0);
		setCookie("password", password, remember_me ? 30 : 0)
		return true;
	}
	window.onload = function() {
		var form = document.loginform;
		form.username.value = getCookie("username");
		form.password.value = getCookie("password");
	};
	function setCookie(name, value, exdays) {
	    var d = new Date();
	    d.setTime(d.getTime()+(exdays*24*60*60*1000));
	    var expires = "expires="+d.toGMTString();
	    document.cookie = name+"="+value+"; "+expires;
	}
	function getCookie(name) {
	    var n = name + "=";
	    var cookies = document.cookie.split(';');
	    for(var i=0; i<cookies.length; i++) {
	        var c = cookies[i].trim();
	        if (c.indexOf(n)==0) { return c.substring(n.length,c.length); }
	    }
	    return "";
	}
</script>
{% endblock %}

{% block content %}
<p id="errmsg" class="red">{{message}}</p>
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

{{ game.description|safe }}


<form action="/login/" method="post" name="loginform">
	{% csrf_token %}
	<h4>======>账号信息<======</h4>
	<p>登录账号：</p><input type="text" name="username" />

	<p>登录密码：</p><input type="password" name="password" />
	<p><input type="checkbox" name="remember_me" checked="checked">记住密码</p>
	<p><input type="submit" value="登录" onclick="return login();" /></p>
	<p><a href="/register/">没有账号？去注册</a></p>
</form>
{% endblock %}